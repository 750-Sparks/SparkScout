<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VEX Robotics Competition Search Results</title>
    <style>
        /* General Styles */
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 20px;
            color: #333;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        p {
            text-align: center;
            color: #555;
            font-size: 1.1rem;
        }

        /* Results Container */
        #competitionList {
            list-style-type: none;
            padding: 0;
            max-width: 800px;
            margin: 0 auto;
        }

        #competitionList li {
            background: #fff;
            margin: 10px 0;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        #competitionList li:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        #competitionList li strong {
            color: #2c3e50;
            font-size: 1.2rem;
        }

        #competitionList li span {
            display: block;
            margin-top: 5px;
            color: #666;
        }

        button {
            padding: 8px 16px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #2980b9;
        }

        .no-results {
            text-align: center;
            color: #e74c3c;
            font-size: 1.2rem;
        }
    </style>
</head>
<body>

    <h1>VEX Robotics Competition Search Results</h1>
    <p id="result"></p>
    <ul id="competitionList"></ul>

    <script>
        // Sample competition data (replace this with your actual data)
        const competitions = [
            { id: 1, name: "VEX High Stakes", loc_city: "New York", loc_region: "New York", start_date: "2025-04-12" },
            { id: 2, name: "VEX Camden Catholic High School", loc_city: "Camden", loc_region: "New Jersey", start_date: "2025-01-25" },
            { id: 3, name: "VEX Regional", loc_city: "Chicago", loc_region: "Illinois", start_date: "2025-06-15" },
            { id: 4, name: "VEX State Championship", loc_city: "Princeton", loc_region: "New Jersey", start_date: "2025-03-10" },
            { id: 5, name: "VEX World Championship", loc_city: "Dallas", loc_region: "Texas", start_date: "2025-07-05" }
        ];

        // Function to get query parameter from URL
        function getQueryParameter(name) {
            let params = new URLSearchParams(window.location.search);
            return params.get(name);
        }

        // Display results on the page
        function displayResults(results) {
            const list = document.getElementById("competitionList");
            list.innerHTML = ""; // Clear previous results

            if (results.length === 0) {
                list.innerHTML = "<li class='no-results'>No competitions found.</li>";
            } else {
                results.forEach(comp => {
                    const item = document.createElement("li");
                    item.innerHTML = `
                        <strong>${comp.name}</strong>
                        <span>Location: ${comp.loc_city}, ${comp.loc_region}</span>
                        <span>Date: ${comp.start_date}</span>
                        <button onclick="handleViewTeams(${comp.id})">View Teams</button>
                    `;
                    list.appendChild(item);
                });
            }
        }

        // Handle "View Teams" button click
        function handleViewTeams(eventId) {
            console.log("View Teams button clicked for event ID:", eventId);
            // Redirect to the teams page with the event ID
            window.location.href = `teams.html?eventId=${eventId}`;
        }

        // Main function to handle search and display results
        const searchQuery = getQueryParameter("search");
        if (searchQuery) {
            document.getElementById("result").innerText = "Results for: " + decodeURIComponent(searchQuery);

            // Simulate filtering competitions based on the search query
            const filteredCompetitions = competitions.filter(comp =>
                comp.name.toLowerCase().includes(searchQuery.toLowerCase())
            );

            // Display the filtered competitions
            displayResults(filteredCompetitions);
        } else {
            document.getElementById("result").innerText = "No search term provided.";
            alert("Please go back and enter a search term.");
            window.location.href = "index.html"; // Redirect back to the main page
        }
    </script>

</body>
</html>